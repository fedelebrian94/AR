<!doctype html>
<html>
  <head>
    <link rel="icon" href="data:;base64,iVBORw0KGgo=">
    <script src="js/aframe.min.js"></script>
    <script src="js/aframe-ar.js"></script>
  </head>
  <body style="margin: 0px; overflow: hidden;">
    <a-scene embedded vr-mode-ui="enabled: false;" arjs="debugUIEnabled: true; detectionMode: mono_and_matrix; matrixCodeType: 3x3;">
      <a-assets>
        <img id="grid" src="images/border.png" />
        <img id="earth-flat" src="images/earth-flat.jpg" />
        <img id="earth-sphere" src="images/cat.png" />
      </a-assets>

      <a-marker type="pattern" url="data/kanji.patt">
    
        <a-entity 
          gltf-model="https://raw.githubusercontent.com/fedelebrian94/AR/master/fox.glb" 
          scale="2 2 2"
          position="0 0 0" 
          rotation="0 0 0"
          log-on-load>
        </a-entity>
      </a-marker>
      
      <a-marker type="barcode" value="0">
        <a-box position="0 0.5 0" material="src: #grid; color: yellow; transparent: true; opacity: 0.50;"></a-box>
      </a-marker>

      <a-marker type="barcode" value="1">
        <a-plane position="0 0 0" rotation="-90 0 0" material="src: #earth-flat;"></a-plane>
      </a-marker>

      <a-marker type="barcode" value="2">
        <a-sphere position="0 0.5 0" material="src: #earth-sphere; transparent: true; opacity: 0.95;"></a-sphere>
      </a-marker>

      <a-entity camera></a-entity>
    </a-scene>

    <script>
      AFRAME.registerComponent('log-on-load', {
        init: function () {
          this.el.addEventListener('model-loaded', () => {
            console.log('Modello GLB caricato!');
            alert('Modello GLB caricato!');
          });
          this.el.addEventListener('model-error', (evt) => {
            console.error('Errore caricamento modello:', evt.detail);
            alert('Errore caricamento modello!');
          });
        }
      });
    </script>
  </body>
</html>
